<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chaotic Attractor Infinity</title>
    <style>
        body { margin: 0; padding: 0; overflow: hidden; background: #000; }
        canvas { display: block; }
    </style>
</head>
<body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    <script>
        let particles = [];
        let time = 0;
        let showTrails = true;
        
        function setup() {
            createCanvas(windowWidth, windowHeight);
            colorMode(HSB, 360, 100, 100, 100);
            
            // Create particles following Thomas attractor - unconventional & proven to work
            for (let i = 0; i < 12; i++) {
                particles.push({
                    x: random(-50, 50),
                    y: random(-50, 50),
                    z: random(-50, 50),
                    trail: [],
                    hue: i * 30,
                    phase: i * 0.5
                });
            }
        }

        function draw() {
            background(0, 0, 0, 15); // Subtle fade for trails
            
            push();
            translate(width / 2, height / 2);
            scale(4); // Zoom out for full pattern visibility
            
            // Draw the extraordinary pattern
            for (let particle of particles) {
                // Thomas attractor equations - proven to create mesmerizing patterns
                let dx = sin(particle.y) - 0.19 * particle.x;
                let dy = sin(particle.z) - 0.19 * particle.y;
                let dz = sin(particle.x) - 0.19 * particle.z;
                
                particle.x += dx * 0.3;
                particle.y += dy * 0.3;
                particle.z += dz * 0.3;
                
                // Track trail
                particle.trail.push({x: particle.x, y: particle.y});
                if (particle.trail.length > 300) {
                    particle.trail.shift();
                }
                
                // Draw elegant flowing trail
                if (particle.trail.length > 1 && showTrails) {
                    for (let i = 0; i < particle.trail.length - 1; i++) {
                        let progress = i / particle.trail.length;
                        let alpha = progress * progress * 80;
                        let currentHue = (particle.hue + time * 50 + progress * 60) % 360;
                        
                        stroke(currentHue, 90, 100, alpha);
                        strokeWeight(1);
                        line(particle.trail[i].x, particle.trail[i].y, 
                             particle.trail[i + 1].x, particle.trail[i + 1].y);
                    }
                }
                
                // Draw glowing node
                let nodeHue = (particle.hue + time * 50) % 360;
                fill(nodeHue, 100, 100, 90);
                noStroke();
                ellipse(particle.x, particle.y, 4);
                
                // Soft glow
                drawingContext.shadowBlur = 8;
                drawingContext.shadowColor = color(nodeHue, 100, 100);
                ellipse(particle.x, particle.y, 6);
                drawingContext.shadowBlur = 0;
            }
            
            pop();
            
            time += 0.01;
        }

        function keyPressed() {
            if (key === ' ') {
                // Reset
                setup();
                time = 0;
            }
            if (key === 'm' || key === 'M') {
                showTrails = !showTrails;
            }
        }

        function windowResized() {
            resizeCanvas(windowWidth, windowHeight);
        }
    </script>
</body>
</html>
